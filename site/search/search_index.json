{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"UnelmaPay API Documentation","text":"<p>Welcome to the official UnelmaPay API documentation. This documentation provides comprehensive guides and references to help you integrate with UnelmaPay's payment processing system.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>New to UnelmaPay? Start with our Getting Started Guide to learn how to integrate our payment system into your application.</p>"},{"location":"#api-reference","title":"API Reference","text":"<ul> <li>Payment Form Integration</li> <li>IPN Callback Handling</li> </ul>"},{"location":"#testing","title":"Testing","text":"<ul> <li>Testing Your Integration</li> </ul>"},{"location":"#need-help","title":"Need Help?","text":"<ul> <li>Visit our Support Portal or email support@unelmapay.com</li> <li>View on GitHub</li> </ul>"},{"location":"api/ipn-callback/","title":"IPN (Instant Payment Notification) Callback","text":"<p>UnelmaPay sends Instant Payment Notifications (IPN) to your server to notify you about payment events. This document explains how to implement and verify IPN callbacks.</p>"},{"location":"api/ipn-callback/#ipn-workflow","title":"IPN Workflow","text":"<ol> <li>Customer completes payment</li> <li>UnelmaPay sends a POST request to your IPN URL</li> <li>Your server validates the request</li> <li>Your server processes the payment notification</li> <li>Your server returns a 200 OK response</li> </ol>"},{"location":"api/ipn-callback/#ipn-parameters","title":"IPN Parameters","text":"Parameter Type Description <code>total</code> decimal Total amount paid <code>date</code> string Transaction date (YYYYMMDD) <code>id_transfer</code> string Unique transaction ID <code>hash</code> string Verification hash <code>custom</code> string Your order/reference ID <code>item_name</code> string Product/service name <code>currency</code> string Currency code used <code>status</code> string Payment status (e.g., \"completed\")"},{"location":"api/ipn-callback/#verification-process","title":"Verification Process","text":"<ol> <li>Receive the IPN - Your server receives a POST request</li> <li>Extract Parameters - Get all POST parameters</li> <li>Verify Hash - Recalculate and compare the hash</li> <li>Process Payment - Update your database/records</li> <li>Send Response - Return HTTP 200 OK</li> </ol>"},{"location":"api/ipn-callback/#php-implementation-example","title":"PHP Implementation Example","text":"<pre><code>&lt;?php\n// Configuration\n$logFile = __DIR__ . '/ipn_log.txt';\n$merchantPassword = 'YOUR_MERCHANT_PASSWORD';\n\n// Log function\nfunction logIPN($message, $data = null) {\n    global $logFile;\n    $timestamp = date('Y-m-d H:i:s');\n    $logMessage = \"[$timestamp] $message\" . PHP_EOL;\n    if ($data !== null) {\n        $logMessage .= 'Data: ' . print_r($data, true) . PHP_EOL;\n    }\n    file_put_contents($logFile, $logMessage, FILE_APPEND);\n}\n\n// Log the request\nlogIPN('IPN Received', $_POST);\n\n// Get parameters\n$total = $_POST['total'] ?? '';\n$date = $_POST['date'] ?? '';\n$idTransfer = $_POST['id_transfer'] ?? '';\n$receivedHash = $_POST['hash'] ?? '';\n$custom = $_POST['custom'] ?? '';\n\n// Calculate hash\n$hashString = $total . ':' . $merchantPassword . ':' . $date . ':' . $idTransfer;\n$calculatedHash = strtoupper(md5($hashString));\n\n// Verify hash\nif ($receivedHash === $calculatedHash) {\n    // Payment is verified\n    logIPN(\"Payment verified\", [\n        'transaction_id' =&gt; $idTransfer,\n        'order_id' =&gt; $custom,\n        'amount' =&gt; $total,\n        'status' =&gt; 'verified'\n    ]);\n\n    // TODO: Update your database here\n    // Example: mark order as paid\n\n    // Send success response\n    header('HTTP/1.1 200 OK');\n    echo \"IPN Received and Verified\";\n} else {\n    // Invalid hash\n    logIPN(\"Invalid hash\", [\n        'received_hash' =&gt; $receivedHash,\n        'calculated_hash' =&gt; $calculatedHash\n    ]);\n    header('HTTP/1.1 400 Bad Request');\n    echo \"Invalid IPN\";\n}\n</code></pre>"},{"location":"api/ipn-callback/#testing-ipn","title":"Testing IPN","text":"<ol> <li>Test Endpoint: <code>https://dev.unelmapay.com/sci/form</code></li> <li>Test Merchant ID: Use your test merchant ID</li> <li>Test Callback: Ensure your IPN handler is accessible via HTTPS</li> </ol>"},{"location":"api/ipn-callback/#best-practices","title":"Best Practices","text":"<ol> <li>Always verify the hash - Never process payments without hash verification</li> <li>Handle duplicates - Implement idempotency in your IPN handler</li> <li>Log everything - Maintain detailed logs for debugging</li> <li>Use HTTPS - Ensure your IPN endpoint is secure</li> <li>Set timeouts - Configure appropriate timeouts for IPN processing</li> </ol>"},{"location":"api/ipn-callback/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>No IPN Received: Check your server's error logs and firewall settings</li> <li>Invalid Hash: Verify your merchant password and hash calculation</li> <li>Timeout Issues: Ensure your server responds within 30 seconds</li> </ul>"},{"location":"api/payment-form/","title":"Payment Form Integration","text":"<p>UnelmaPay's payment form integration allows you to quickly add payment functionality to your website with minimal coding.</p>"},{"location":"api/payment-form/#form-parameters","title":"Form Parameters","text":"Parameter Type Required Description <code>merchant</code> string Yes Your merchant ID <code>item_name</code> string Yes Name of the product/service (3-100 chars) <code>amount</code> decimal Yes Payment amount (must be &gt; 0) <code>currency</code> string Yes Currency code (e.g., <code>debit_base</code>) <code>custom</code> string Yes Your order/reference ID (max 100 chars) <code>return_url</code> URL No URL to redirect after payment (overrides merchant setting) <code>cancel_url</code> URL No URL to redirect if payment is cancelled <code>notify_url</code> URL No URL for IPN callbacks (overrides merchant setting)"},{"location":"api/payment-form/#example-form","title":"Example Form","text":"<pre><code>&lt;form method=\"POST\" action=\"https://dev.unelmapay.com.np/sci/form\" id=\"paymentForm\"&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Merchant ID:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"merchant\" value=\"YOUR_MERCHANT_ID\" required&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Item Name:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"item_name\" value=\"Premium Service\" required&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Amount (must be &gt; 1):&lt;/label&gt;\n        &lt;input type=\"number\" name=\"amount\" min=\"1.01\" step=\"0.01\" value=\"2.00\" required&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Currency:&lt;/label&gt;\n        &lt;select name=\"currency\" required&gt;\n            &lt;option value=\"debit_base\"&gt;Base Currency&lt;/option&gt;\n            &lt;option value=\"debit_extra1\"&gt;Extra 1&lt;/option&gt;\n            &lt;option value=\"debit_extra2\"&gt;Extra 2&lt;/option&gt;\n            &lt;option value=\"debit_extra3\"&gt;Extra 3&lt;/option&gt;\n            &lt;option value=\"debit_extra4\"&gt;Extra 4&lt;/option&gt;\n            &lt;option value=\"debit_extra5\"&gt;Extra 5&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Order/Reference ID:&lt;/label&gt;\n        &lt;input type=\"text\" name=\"custom\" value=\"ORDER_123\" required&gt;\n    &lt;/div&gt;\n\n    &lt;button type=\"submit\" class=\"btn-pay\"&gt;Pay Now&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"api/payment-form/#response-handling","title":"Response Handling","text":"<p>After payment processing, the user will be redirected to: - Success URL: If payment is successful - Cancel URL: If payment is cancelled - Fail URL: If payment fails</p>"},{"location":"api/payment-form/#security-considerations","title":"Security Considerations","text":"<ol> <li>Always validate form input on the server side</li> <li>Use HTTPS for all requests</li> <li>Verify IPN callbacks using the provided hash</li> <li>Never expose your merchant password in client-side code</li> </ol>"},{"location":"getting-started/overview/","title":"Getting Started with UnelmaPay","text":"<p>Welcome to UnelmaPay! This guide will help you integrate our payment processing system into your application.</p>"},{"location":"getting-started/overview/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, you'll need: - A merchant account with UnelmaPay - Your merchant ID (provided during registration) - A web server to host your payment forms and callbacks</p>"},{"location":"getting-started/overview/#integration-options","title":"Integration Options","text":"<p>UnelmaPay offers multiple integration methods:</p> <ol> <li>Payment Form - Simple HTML form integration (easiest)</li> <li>API Integration - Direct API calls for more control</li> <li>SDKs - Coming soon for popular programming languages</li> </ol>"},{"location":"getting-started/overview/#quick-start-payment-form","title":"Quick Start: Payment Form","text":"<p>The fastest way to get started is with our payment form integration. Add this code to your website:</p> <pre><code>&lt;form method=\"POST\" action=\"https://dev.unelmapay.com.np/sci/form\"&gt;\n    &lt;input type=\"hidden\" name=\"merchant\" value=\"YOUR_MERCHANT_ID\"&gt;\n    &lt;input type=\"hidden\" name=\"item_name\" value=\"Product Name\"&gt;\n    &lt;input type=\"hidden\" name=\"amount\" value=\"10.00\"&gt;\n    &lt;input type=\"hidden\" name=\"currency\" value=\"debit_base\"&gt;\n    &lt;input type=\"hidden\" name=\"custom\" value=\"ORDER_ID\"&gt;\n    &lt;button type=\"submit\"&gt;Pay Now&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"getting-started/overview/#next-steps","title":"Next Steps","text":"<ol> <li>Set up IPN callbacks to receive payment notifications - See IPN Callback Documentation</li> <li>Test your integration in the development environment - See Testing Guide</li> <li>For production, update the form action to <code>https://unelmapay.com.np/sci/form</code></li> </ol>"},{"location":"guides/testing/","title":"Testing Your Integration","text":"<p>This guide will help you test your UnelmaPay integration before going live.</p>"},{"location":"guides/testing/#testing-environment","title":"Testing Environment","text":""},{"location":"guides/testing/#development-environment","title":"Development Environment","text":"<ul> <li>URL: <code>https://dev.unelmapay.com.np/sci/form</code></li> <li>Purpose: Initial testing and development</li> <li>Features:</li> <li>Test payments (no real money involved)</li> <li>Immediate feedback</li> <li>Test merchant accounts available</li> </ul>"},{"location":"guides/testing/#testing-ipn-callbacks","title":"Testing IPN Callbacks","text":"<ol> <li>Set up your IPN handler</li> <li>Ensure it's accessible via HTTPS</li> <li>Enable detailed logging</li> <li> <p>Handle duplicate notifications</p> </li> <li> <p>Test IPN Endpoint <pre><code>curl -X POST https://your-server.com/ipn_handler.php \\\n  -d \"total=10.00\" \\\n  -d \"date=20230809\" \\\n  -d \"id_transfer=TEST_123\" \\\n  -d \"hash=TEST_HASH\" \\\n  -d \"custom=ORDER_123\" \\\n  -d \"item_name=Test+Product\" \\\n  -d \"currency=debit_base\"\n</code></pre></p> </li> </ol>"},{"location":"guides/testing/#common-test-scenarios","title":"Common Test Scenarios","text":""},{"location":"guides/testing/#successful-payment","title":"Successful Payment","text":"<ol> <li>Submit payment form with valid test card</li> <li>Verify IPN received with status=completed</li> <li>Check order status in your system</li> </ol>"},{"location":"guides/testing/#failed-payment","title":"Failed Payment","text":"<ol> <li>Use failing test card (4000 0000 0000 0002)</li> <li>Verify proper error handling</li> <li>Check IPN for failure notification</li> </ol>"},{"location":"guides/testing/#ipn-verification","title":"IPN Verification","text":"<ol> <li>Send test IPN to your endpoint</li> <li>Verify hash calculation</li> <li>Check database updates</li> </ol>"},{"location":"guides/testing/#debugging-tips","title":"Debugging Tips","text":"<ol> <li> <p>Check Logs <pre><code>tail -f /path/to/your/ipn_log.txt\n</code></pre></p> </li> <li> <p>Verify Hash <pre><code>$hash = strtoupper(md5($total . ':' . $merchantPassword . ':' . $date . ':' . $idTransfer));\n</code></pre></p> </li> <li> <p>Test Locally</p> </li> <li>Use ngrok for local testing</li> <li>Forward requests to localhost</li> <li>Inspect incoming requests</li> </ol>"},{"location":"guides/testing/#going-live","title":"Going Live","text":"<p>Before going live: 1. Test all payment scenarios 2. Verify IPN handling 3. Remove test credentials 4. Enable production API keys 5. Monitor transactions closely</p>"}]}